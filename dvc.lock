schema: '2.0'
stages:
  data_ingestion:
    cmd: python src/DeepfakeDetection/pipeline/stage_01_data_ingestion.py
    deps:
    - path: config/config.yaml
      hash: md5
      md5: d80b48dfa8e78b7581b8d65da4285492
      size: 993
    - path: src/DeepfakeDetection/components/data_ingestion.py
      hash: md5
      md5: 5552a9f16489f8905004b944cb5c2f1e
      size: 7675
    - path: src/DeepfakeDetection/pipeline/stage_01_data_ingestion.py
      hash: md5
      md5: 91709652d0014be3ea96fc12c894aff1
      size: 1139
    outs:
    - path: artifacts/data_ingestion/data
      hash: md5
      md5: ff7fe217076aa37c2c008781e226c96a.dir
      size: 6740863719
      nfiles: 2067
  data_preprocessing:
    cmd: python src/DeepfakeDetection/pipeline/stage_02_data_preprocessing.py
    deps:
    - path: artifacts/data_ingestion/dfdc_train_part_0
      hash: md5
      md5: 3208ad59d94535bc9a5b0cd11aaa0bfc.dir
      size: 12377760953
      nfiles: 1335
    - path: config/config.yaml
      hash: md5
      md5: 3e42e4d0205499bd198b31a32c7a85a8
      size: 1082
    - path: src/DeepfakeDetection/components/data_preprocessing.py
      hash: md5
      md5: 75f601585b1c1788b0f750e90632f432
      size: 18008
    - path: src/DeepfakeDetection/pipeline/stage_02_data_preprocessing.py
      hash: md5
      md5: 517e009d06de184a6764a6e8d3f30334
      size: 866
    params:
      params.yaml:
        max_frames: 100
        min_neighbors: 5
        min_size:
        - 30
        - 30
        scale_factor: 1.1
        target_size:
        - 224
        - 224
    outs:
    - path: artifacts/data_preprocessing/test/data/data.h5
      hash: md5
      md5: 6e8e9509caaa7ab91e7ea8812da3f4b1
      size: 8737900840
    - path: artifacts/data_preprocessing/test/labels/labels.h5
      hash: md5
      md5: 04b08780bece40fa9ef9f75a834f9757
      size: 124936
    - path: artifacts/data_preprocessing/train/data/data.h5
      hash: md5
      md5: 8836109476359c04bb9ba26b9f00fd47
      size: 38326223200
    - path: artifacts/data_preprocessing/train/labels/labels.h5
      hash: md5
      md5: a4ee73f1ca90278f96024f3d49d46100
      size: 527112
    - path: artifacts/data_preprocessing/val/data/data.h5
      hash: md5
      md5: 521d008962ddf322702b6a5435a98e59
      size: 8256753728
    - path: artifacts/data_preprocessing/val/labels/labels.h5
      hash: md5
      md5: 673d4983aafd79744cac10d0990a734f
      size: 121880
  model_training:
    cmd: python src/DeepfakeDetection/pipeline/stage_03_model_training.py
    deps:
    - path: artifacts/data_preprocessing/train/data/data.h5
      hash: md5
      md5: 8836109476359c04bb9ba26b9f00fd47
      size: 38326223200
    - path: artifacts/data_preprocessing/train/labels/labels.h5
      hash: md5
      md5: a4ee73f1ca90278f96024f3d49d46100
      size: 527112
    - path: artifacts/data_preprocessing/val/data/data.h5
      hash: md5
      md5: 521d008962ddf322702b6a5435a98e59
      size: 8256753728
    - path: artifacts/data_preprocessing/val/labels/labels.h5
      hash: md5
      md5: 673d4983aafd79744cac10d0990a734f
      size: 121880
    - path: config/config.yaml
      hash: md5
      md5: 3e42e4d0205499bd198b31a32c7a85a8
      size: 1082
    - path: src/DeepfakeDetection/components/model_training.py
      hash: md5
      md5: c5ad8d9a3c53191f0800ffb53fbdff4b
      size: 10923
    - path: src/DeepfakeDetection/pipeline/stage_03_model_training.py
      hash: md5
      md5: 1c9175ef6258a14a5a2eb20012c17fce
      size: 726
    params:
      params.yaml:
        activation: relu
        batch_size: 8
        buffer: 800
        const_lr: true
        contrast: 0.2
        decay_rate: 0.9
        decay_steps: 10000
        dropout_rate: 0.5
        epochs: 10
        gnoise: 0.1
        include_top: true
        initial_learning_rate: 0.1
        input_shape:
        - 224
        - 224
        - 3
        l2: 0.01
        learning_rate_decay: 0.9
        pretrained: true
        pretrained_top: false
        rotation: 0.2
        units: 256
        zoom: 0.2
    outs:
    - path: artifacts/model_training/model.h5
      hash: md5
      md5: 08c48b947bd396747f2ad619b4b20950
      size: 1030229768
  model_evaluation:
    cmd: python src/DeepfakeDetection/pipeline/stage_04_model_evaluation.py
    deps:
    - path: artifacts/data_preprocessing/test/data/data.h5
      hash: md5
      md5: 6e8e9509caaa7ab91e7ea8812da3f4b1
      size: 8737900840
    - path: artifacts/data_preprocessing/test/labels/labels.h5
      hash: md5
      md5: 04b08780bece40fa9ef9f75a834f9757
      size: 124936
    - path: artifacts/model_training/model.h5
      hash: md5
      md5: 08c48b947bd396747f2ad619b4b20950
      size: 1030229768
    - path: config/config.yaml
      hash: md5
      md5: 3e42e4d0205499bd198b31a32c7a85a8
      size: 1082
    - path: src/DeepfakeDetection/components/model_evaluation.py
      hash: md5
      md5: f662787c0cb44d5db429aa2b7fbe1818
      size: 4779
    - path: src/DeepfakeDetection/pipeline/stage_04_model_evaluation.py
      hash: md5
      md5: effc1a73fba13c41e7b5f6fe4f28c209
      size: 842
    params:
      params.yaml:
        threshold: 0.5
    outs:
    - path: artifacts/model_evaluation/score.json
      hash: md5
      md5: 68a393d8d50ce38b39dd6b8adb1d1341
      size: 842
