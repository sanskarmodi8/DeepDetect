schema: '2.0'
stages:
  data_ingestion:
    cmd: python src/DeepfakeDetection/pipeline/stage_01_data_ingestion.py
    deps:
    - path: config/config.yaml
      hash: md5
      md5: 7b1a661a004992d36a2a40c23c27df9f
      size: 982
    - path: src/DeepfakeDetection/components/data_ingestion.py
      hash: md5
      md5: 54fd7dd76340336d90bdb88a05fc15c4
      size: 8120
    - path: src/DeepfakeDetection/pipeline/stage_01_data_ingestion.py
      hash: md5
      md5: 91709652d0014be3ea96fc12c894aff1
      size: 1139
    outs:
    - path: artifacts/data_ingestion/data
      hash: md5
      md5: d751713988987e9331980363e24189ce.dir
      size: 0
      nfiles: 0
  data_preprocessing:
    cmd: python src/DeepfakeDetection/pipeline/stage_02_data_preprocessing.py
    deps:
    - path: artifacts/data_ingestion/data
      hash: md5
      md5: 67176ea9acb2442fafd84cba7d120192.dir
      size: 2726316097
      nfiles: 905
    - path: config/config.yaml
      hash: md5
      md5: a19de3153aec88c5902c8b3d559e1b58
      size: 1096
    - path: src/DeepfakeDetection/components/data_preprocessing.py
      hash: md5
      md5: 07216c6094ff19e82c033e99f1803c7e
      size: 7248
    - path: src/DeepfakeDetection/pipeline/stage_02_data_preprocessing.py
      hash: md5
      md5: 35eb4149663a63c39962934cc6d94694
      size: 862
    params:
      params.yaml:
        fps: 30
        max_frames: 150
        resolution:
        - 112
        - 112
    outs:
    - path: artifacts/data_preprocessing/test
      hash: md5
      md5: 24636f37b35498bfe8a1d0dadbbb78ab.dir
      size: 13468717
      nfiles: 136
    - path: artifacts/data_preprocessing/train
      hash: md5
      md5: 000442cc6d1652e660efad8a76944f4a.dir
      size: 60246343
      nfiles: 633
    - path: artifacts/data_preprocessing/val
      hash: md5
      md5: 73fd0f42dfd9d8670a41e816957329a6.dir
      size: 12157533
      nfiles: 136
  model_training:
    cmd: python src/DeepfakeDetection/pipeline/stage_03_model_training.py
    deps:
    - path: artifacts/data_preprocessing/train/data/data.h5
      hash: md5
      md5: e28cb9d53ce7cc56ca0e3c8c7d4a14c8
      size: 7851815952
    - path: artifacts/data_preprocessing/train/labels/labels.h5
      hash: md5
      md5: 970fabda34b5cf36daa90f36f43a4130
      size: 579248
    - path: artifacts/data_preprocessing/val/data/data.h5
      hash: md5
      md5: 75bd76e2ef39855c86e791fce3d66312
      size: 2126230384
    - path: artifacts/data_preprocessing/val/labels/labels.h5
      hash: md5
      md5: 48d0d9400cc6ba48f169e4b1bbe35a08
      size: 152000
    - path: config/config.yaml
      hash: md5
      md5: a19de3153aec88c5902c8b3d559e1b58
      size: 1096
    - path: src/DeepfakeDetection/components/model_training.py
      hash: md5
      md5: b926b633402de779239e8b06604f14e3
      size: 13119
    - path: src/DeepfakeDetection/pipeline/stage_03_model_training.py
      hash: md5
      md5: 1c9175ef6258a14a5a2eb20012c17fce
      size: 726
    params:
      params.yaml:
        activation: relu
        attention_depth: 6
        batch_size: 4
        buffer: 800
        const_lr: false
        decay_rate: 0.9
        decay_steps: 5000
        dropout_rate: 0.2
        epochs: 20
        initial_learning_rate: 0.0001
        input_shape:
        - 260
        - 260
        - 3
        l2: 0.02
        learning_rate_decay: 0.001
        pretrained: false
        units: 512
    outs:
    - path: artifacts/model_training/ckpt.weights.h5
      hash: md5
      md5: 064adf0690bb9711379ad5b0be46f2c3
      size: 594816184
    - path: artifacts/model_training/saved_model
      hash: md5
      md5: 903e4e2f47e73616e9b67f602ca05188.dir
      size: 1793240515
      nfiles: 4
  model_evaluation:
    cmd: python src/DeepfakeDetection/pipeline/stage_04_model_evaluation.py
    deps:
    - path: artifacts/data_preprocessing/test/data/data.h5
      hash: md5
      md5: 6a1d89fb597855606d4f365eeff86353
      size: 1884375360
    - path: artifacts/data_preprocessing/test/labels/labels.h5
      hash: md5
      md5: 40e5d616a018ce87de3ea399fd1947a9
      size: 141520
    - path: artifacts/model_training/ckpt.weights.h5
      hash: md5
      md5: 064adf0690bb9711379ad5b0be46f2c3
      size: 594816184
    - path: artifacts/model_training/saved_model
      hash: md5
      md5: 903e4e2f47e73616e9b67f602ca05188.dir
      size: 1793240515
      nfiles: 4
    - path: config/config.yaml
      hash: md5
      md5: a19de3153aec88c5902c8b3d559e1b58
      size: 1096
    - path: src/DeepfakeDetection/components/model_evaluation.py
      hash: md5
      md5: 36e927833c58df748cb3901a199aedc9
      size: 4749
    - path: src/DeepfakeDetection/pipeline/stage_04_model_evaluation.py
      hash: md5
      md5: effc1a73fba13c41e7b5f6fe4f28c209
      size: 842
    params:
      params.yaml:
        batch_size: 4
        input_shape:
        - 260
        - 260
        - 3
        threshold: 0.5
    outs:
    - path: artifacts/model_evaluation/score.json
      hash: md5
      md5: 59aad206c3ae5ed1c3e3643f1d2d6e49
      size: 912
