schema: '2.0'
stages:
  data_ingestion:
    cmd: python src/DeepfakeDetection/pipeline/stage_01_data_ingestion.py
    deps:
    - path: config/config.yaml
      hash: md5
      md5: 3e42e4d0205499bd198b31a32c7a85a8
      size: 1082
    - path: src/DeepfakeDetection/components/data_ingestion.py
      hash: md5
      md5: 1f1f73e7a5dca9b464151f4f335f529d
      size: 3057
    - path: src/DeepfakeDetection/pipeline/stage_01_data_ingestion.py
      hash: md5
      md5: 8bc56e9a032d10a2f7f9f9e3fe0ab775
      size: 840
    outs:
    - path: artifacts/data_ingestion/dfdc_train_part_0
      hash: md5
      md5: 3208ad59d94535bc9a5b0cd11aaa0bfc.dir
      size: 12377760953
      nfiles: 1335
  data_preprocessing:
    cmd: python src/DeepfakeDetection/pipeline/stage_02_data_preprocessing.py
    deps:
    - path: artifacts/data_ingestion/dfdc_train_part_0
      hash: md5
      md5: 3208ad59d94535bc9a5b0cd11aaa0bfc.dir
      size: 12377760953
      nfiles: 1335
    - path: config/config.yaml
      hash: md5
      md5: 3e42e4d0205499bd198b31a32c7a85a8
      size: 1082
    - path: src/DeepfakeDetection/components/data_preprocessing.py
      hash: md5
      md5: ffbc1756c0943ac56b8bb788f15ffde0
      size: 17965
    - path: src/DeepfakeDetection/pipeline/stage_02_data_preprocessing.py
      hash: md5
      md5: 517e009d06de184a6764a6e8d3f30334
      size: 866
    params:
      params.yaml:
        max_frames: 100
        min_neighbors: 5
        min_size:
        - 30
        - 30
        scale_factor: 1.1
        target_size:
        - 224
        - 224
    outs:
    - path: artifacts/data_preprocessing/test/data/data.h5
      hash: md5
      md5: 55e9cfc12e3b79c31a02bf7c668fc4ca
      size: 8737900840
    - path: artifacts/data_preprocessing/test/labels/labels.h5
      hash: md5
      md5: 04b08780bece40fa9ef9f75a834f9757
      size: 124936
    - path: artifacts/data_preprocessing/train/data/data.h5
      hash: md5
      md5: 4514dc72b7d99d541eaccc779beadddf
      size: 38326223200
    - path: artifacts/data_preprocessing/train/labels/labels.h5
      hash: md5
      md5: a4ee73f1ca90278f96024f3d49d46100
      size: 527112
    - path: artifacts/data_preprocessing/val/data/data.h5
      hash: md5
      md5: 0b7ce9b5555edb8bb5fc65df52f4d657
      size: 8256753728
    - path: artifacts/data_preprocessing/val/labels/labels.h5
      hash: md5
      md5: 673d4983aafd79744cac10d0990a734f
      size: 121880
  model_training:
    cmd: python src/DeepfakeDetection/pipeline/stage_03_model_training.py
    deps:
    - path: artifacts/data_preprocessing/train/data/data.h5
      hash: md5
      md5: 4514dc72b7d99d541eaccc779beadddf
      size: 38326223200
    - path: artifacts/data_preprocessing/train/labels/labels.h5
      hash: md5
      md5: a4ee73f1ca90278f96024f3d49d46100
      size: 527112
    - path: artifacts/data_preprocessing/val/data/data.h5
      hash: md5
      md5: 0b7ce9b5555edb8bb5fc65df52f4d657
      size: 8256753728
    - path: artifacts/data_preprocessing/val/labels/labels.h5
      hash: md5
      md5: 673d4983aafd79744cac10d0990a734f
      size: 121880
    - path: config/config.yaml
      hash: md5
      md5: 3e42e4d0205499bd198b31a32c7a85a8
      size: 1082
    - path: src/DeepfakeDetection/components/model_training.py
      hash: md5
      md5: a140095cdf47be69886595b81687057b
      size: 9807
    - path: src/DeepfakeDetection/pipeline/stage_03_model_training.py
      hash: md5
      md5: 1c9175ef6258a14a5a2eb20012c17fce
      size: 726
    params:
      params.yaml:
        activation: relu
        batch_size: 16
        decay_rate: 0.9
        decay_steps: 10000
        dropout_rate: 0.5
        epochs: 10
        include_top: false
        initial_learning_rate: 0.001
        input_shape:
        - 224
        - 224
        - 3
        l2: 0.01
        learning_rate_decay: 0.9
        pretrained: true
        pretrained_top: false
        rotation: 0.1
        units: 256
        zoom: 0.1
    outs:
    - path: artifacts/model_training/model.h5
      hash: md5
      md5: d87b3abbbd7b768f5eeabb305e6a7846
      size: 1032642728
  model_evaluation:
    cmd: python src/DeepfakeDetection/pipeline/stage_04_model_evaluation.py
    deps:
    - path: artifacts/data_preprocessing/test/data/data.h5
      hash: md5
      md5: 55e9cfc12e3b79c31a02bf7c668fc4ca
      size: 8737900840
    - path: artifacts/data_preprocessing/test/labels/labels.h5
      hash: md5
      md5: 04b08780bece40fa9ef9f75a834f9757
      size: 124936
    - path: artifacts/model_training/model.h5
      hash: md5
      md5: 33223a27b8b46e8c93d1afaca1217278
      size: 1032609848
    - path: config/config.yaml
      hash: md5
      md5: 3e42e4d0205499bd198b31a32c7a85a8
      size: 1082
    - path: src/DeepfakeDetection/components/model_evaluation.py
      hash: md5
      md5: ce9bf5d0881ea22cca6af5ae14706a36
      size: 4702
    - path: src/DeepfakeDetection/pipeline/stage_04_model_evaluation.py
      hash: md5
      md5: effc1a73fba13c41e7b5f6fe4f28c209
      size: 842
    outs:
    - path: artifacts/model_evaluation/score.json
      hash: md5
      md5: 5b06466d4ec1b6332cfde4fc8e0c6ed2
      size: 842
