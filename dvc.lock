schema: '2.0'
stages:
  data_ingestion:
    cmd: python src/DeepfakeDetection/pipeline/stage_01_data_ingestion.py
    deps:
    - path: config/config.yaml
      hash: md5
      md5: 7b1a661a004992d36a2a40c23c27df9f
      size: 982
    - path: src/DeepfakeDetection/components/data_ingestion.py
      hash: md5
      md5: 4981f816f3abdb7febdca0c57621c48f
      size: 7889
    - path: src/DeepfakeDetection/pipeline/stage_01_data_ingestion.py
      hash: md5
      md5: 91709652d0014be3ea96fc12c894aff1
      size: 1139
    outs:
    - path: artifacts/data_ingestion/data
      hash: md5
      md5: 69cbf2517f061a3cef547d1faabbd978.dir
      size: 6874979879
      nfiles: 2078
  data_preprocessing:
    cmd: python src/DeepfakeDetection/pipeline/stage_02_data_preprocessing.py
    deps:
    - path: artifacts/data_ingestion/data
      hash: md5
      md5: 69cbf2517f061a3cef547d1faabbd978.dir
      size: 6874979879
      nfiles: 2078
    - path: config/config.yaml
      hash: md5
      md5: 7b1a661a004992d36a2a40c23c27df9f
      size: 982
    - path: src/DeepfakeDetection/components/data_preprocessing.py
      hash: md5
      md5: acfb1899e75ddf8ebd3efe070cff99e7
      size: 16008
    - path: src/DeepfakeDetection/pipeline/stage_02_data_preprocessing.py
      hash: md5
      md5: 35eb4149663a63c39962934cc6d94694
      size: 862
    params:
      params.yaml:
        max_frames: 100
        min_neighbors: 5
        min_size:
        - 30
        - 30
        scale_factor: 1.1
        target_size:
        - 224
        - 224
    outs:
    - path: artifacts/data_preprocessing/test
      hash: md5
      md5: 813ea23c0f347ca45fac9a00874cffe3.dir
      size: 18205845872
      nfiles: 2
    - path: artifacts/data_preprocessing/train
      hash: md5
      md5: 1b080ff93beae2de783709ba665671a0.dir
      size: 86117358888
      nfiles: 2
    - path: artifacts/data_preprocessing/val
      hash: md5
      md5: 5796d423202c6ff8f192c7b563ac9f33.dir
      size: 18746382600
      nfiles: 2
  model_training:
    cmd: python src/DeepfakeDetection/pipeline/stage_03_model_training.py
    deps:
    - path: artifacts/data_preprocessing/train/data/data.h5
      hash: md5
      md5: c35f04224d4048afc690051566b09b67
      size: 86116129840
    - path: artifacts/data_preprocessing/train/labels/labels.h5
      hash: md5
      md5: a73020616bdd1e8eb1c61782807fc7a9
      size: 1229048
    - path: artifacts/data_preprocessing/val/data/data.h5
      hash: md5
      md5: 334b8a7cf596eff1db36d8409f53b75a
      size: 18746111488
    - path: artifacts/data_preprocessing/val/labels/labels.h5
      hash: md5
      md5: 6884d5b61fd033c3618a1e16ce3aff49
      size: 271112
    - path: config/config.yaml
      hash: md5
      md5: 7b1a661a004992d36a2a40c23c27df9f
      size: 982
    - path: src/DeepfakeDetection/components/model_training.py
      hash: md5
      md5: a1b8f33a6f2f9c0119611756d02e9133
      size: 9662
    - path: src/DeepfakeDetection/pipeline/stage_03_model_training.py
      hash: md5
      md5: 1c9175ef6258a14a5a2eb20012c17fce
      size: 726
    params:
      params.yaml:
        activation: relu
        batch_size: 8
        buffer: 800
        const_lr: true
        contrast: 0.2
        decay_rate: 0.9
        decay_steps: 10000
        dropout_rate: 0.5
        epochs: 50
        gnoise: 0.1
        include_top: false
        initial_learning_rate: 0.01
        input_shape:
        - 224
        - 224
        - 3
        l2: 0.01
        learning_rate_decay: 0.9
        pretrained: true
        pretrained_top: false
        rotation: 0.2
        units: 256
        zoom: 0.2
    outs:
    - path: artifacts/model_training/model.h5
      hash: md5
      md5: 51a09f7a920df0a46f969cf7ac11ea44
      size: 1032609960
  model_evaluation:
    cmd: python src/DeepfakeDetection/pipeline/stage_04_model_evaluation.py
    deps:
    - path: artifacts/data_preprocessing/test/data/data.h5
      hash: md5
      md5: b491cf02a73e028f65676d2f5a809f46
      size: 18205581960
    - path: artifacts/data_preprocessing/test/labels/labels.h5
      hash: md5
      md5: 8050a85c5178c3572f98a27b421410da
      size: 263912
    - path: artifacts/model_training/model.h5
      hash: md5
      md5: 51a09f7a920df0a46f969cf7ac11ea44
      size: 1032609960
    - path: config/config.yaml
      hash: md5
      md5: 7b1a661a004992d36a2a40c23c27df9f
      size: 982
    - path: src/DeepfakeDetection/components/model_evaluation.py
      hash: md5
      md5: f662787c0cb44d5db429aa2b7fbe1818
      size: 4779
    - path: src/DeepfakeDetection/pipeline/stage_04_model_evaluation.py
      hash: md5
      md5: effc1a73fba13c41e7b5f6fe4f28c209
      size: 842
    params:
      params.yaml:
        threshold: 0.5
    outs:
    - path: artifacts/model_evaluation/score.json
      hash: md5
      md5: 866f3c63d63278512cdaf4a31f7b0340
      size: 843
